-- DDL para criação das tabelas no Oracle

DROP TABLE USUARIO CASCADE CONSTRAINTS
DROP TABLE SENSOR CASCADE CONSTRAINTS
DROP TABLE EVENTO CASCADE CONSTRAINTS

-- Criação da tabela USUARIO
CREATE TABLE USUARIO (
    ID_USUARIO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    EMAIL VARCHAR2(150) NOT NULL UNIQUE,
    SENHA VARCHAR2(255) NOT NULL,
    TELEFONE VARCHAR2(20),
    ENDERECO VARCHAR2(500)
);

-- Criação da tabela SENSOR
CREATE TABLE SENSOR (
    NUMERO_SENSOR NUMBER PRIMARY KEY,
    LATITUDE NUMBER(10,8) NOT NULL,
    LONGITUDE NUMBER(11,8) NOT NULL
);

-- Criação da tabela EVENTO
CREATE TABLE EVENTO (
    ID_EVENTO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DATA_HORA TIMESTAMP NOT NULL,
    LATITUDE NUMBER(10,8) NOT NULL,
    LONGITUDE NUMBER(11,8) NOT NULL,
    ID_SENSOR NUMBER NOT NULL,
    CONSTRAINT FK_EVENTO_SENSOR FOREIGN KEY (ID_SENSOR) REFERENCES SENSOR(NUMERO_SENSOR)
);
